<!DOCTYPE html><html lang="en" class="px-4 py-4"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/7385e8d9d3c5518f-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="stylesheet" href="/_next/static/css/8d2a8dc44e2b7a2e.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-35bfe93271ca66a5.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-ca9c0a9a6ec974eb.js" async="" crossorigin=""></script><script src="/_next/static/chunks/472-c8b656bd62baa291.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-de27398721ff5979.js" async="" crossorigin=""></script><script src="/_next/static/chunks/986-77351ce039fbbc1a.js" async=""></script><script src="/_next/static/chunks/app/layout-87d2b172080349b5.js" async=""></script><title>Jasmine&#x27;s llvm playground - 1</title><meta name="description" content="Built with NextJS, TailwindCSS, and a tonnn of loveee :)"/><link rel="icon" href="/_next/static/media/pfp3.5cd65164.png"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="__className_d4e0c8 flex flex-col min-h-screen"><a href="/"><div class="flex justify-center items-center py-4 "><h1 class="text-4xl font-bold">Jasmine Tang</h1></div></a><div class="flex-1"><article class="p-8 prose  max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto"><div class="flex justify-center text-2xl font-bold "><h2>Jasmine&#x27;s llvm playground - 1</h2></div><div class="flex justify-start text-xl font-bold underline"><h4>2024-07-13</h4></div><div><nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#installing-llvm">Installing llvm</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#configuring-cmake">Configuring CMake</a></li></ol></nav><p>Hi everyone, it's Jasmine here, or <code>badumbatish</code>.</p>
<p>Inspired by mcyoung's llvm ir blog and sha4dy's learning llvm blog, I think it'd be great to write some kind of similar blog posts, albeit I'm still learning :)</p>
<p>In this blog post, let's try to get a minimal running example of LLVM running/</p>
<p>We'll get started by installing LLVM, write a CMakeLists.txt to build our code, and create a main.cpp to generate
a <code>main</code> function that returns 0</p>
<h2 id="installing-llvm"><a href="#installing-llvm">Installing llvm</a></h2>
<p>LLVM is a very well-known compiler framework so chances are you wouldn't have to build it from source and just install it from your favorite package manager.</p>
<p>On my MacOS, I'll use homebrew to install llvm</p>
<pre class="shiki poimandres" style="background-color:#1b1e28;color:#a6accd" tabindex="0"><code><span class="line"><span style="color:#91B4D5">brew</span><span style="color:#ADD7FF"> install</span><span style="color:#ADD7FF"> llvm</span></span>
<span class="line"></span></code></pre>
<p>On MacOS, for some reason CMake fails to recognize and find LLVm via <code>find_package()</code> so
you would have to configure it with some extra steps</p>
<p>Then when you run</p>
<pre class="shiki poimandres" style="background-color:#1b1e28;color:#a6accd" tabindex="0"><code><span class="line"><span style="color:#91B4D5">brew</span><span style="color:#ADD7FF"> info</span><span style="color:#ADD7FF"> llvm</span></span>
<span class="line"></span></code></pre>
<p>It'll spit out some extra information about linking flags for you</p>
<pre class="shiki poimandres" style="background-color:#1b1e28;color:#a6accd" tabindex="0"><code><span class="line"><span style="color:#91B4D5">➜</span><span style="color:#ADD7FF">  badumbatish.github.io</span><span style="color:#ADD7FF"> git:</span><span style="color:#A6ACCD">(</span><span style="color:#91B4D5">main</span><span style="color:#A6ACCD">) </span><span style="color:#ADD7FF">✗</span><span style="color:#ADD7FF"> brew</span><span style="color:#ADD7FF"> info</span><span style="color:#ADD7FF"> llvm</span></span>
<span class="line"><span style="color:#ADD7FF">==</span><span style="color:#A6ACCD">> </span><span style="color:#ADD7FF">llvm:</span><span style="color:#ADD7FF"> stable</span><span style="color:#5DE4C7"> 18.1.8</span><span style="color:#A6ACCD"> (bottled), HEAD [keg-only]</span></span>
<span class="line"><span style="color:#91B4D5">Next-gen</span><span style="color:#ADD7FF"> compiler</span><span style="color:#ADD7FF"> infrastructure</span></span>
<span class="line"><span style="color:#91B4D5">https://llvm.org/</span></span>
<span class="line"><span style="color:#91B4D5">Installed</span></span>
<span class="line"><span style="color:#91B4D5">/opt/homebrew/Cellar/llvm/18.1.8</span><span style="color:#A6ACCD"> (7,722 </span><span style="color:#ADD7FF">files,</span><span style="color:#ADD7FF"> 1.8GB</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#91B4D5">  Poured</span><span style="color:#ADD7FF"> from</span><span style="color:#ADD7FF"> bottle</span><span style="color:#ADD7FF"> using</span><span style="color:#ADD7FF"> the</span><span style="color:#ADD7FF"> formulae.brew.sh</span><span style="color:#ADD7FF"> API</span><span style="color:#ADD7FF"> on</span><span style="color:#ADD7FF"> 2024-07-01</span><span style="color:#ADD7FF"> at</span><span style="color:#ADD7FF"> 16:36:01</span></span>
<span class="line"><span style="color:#91B4D5">From:</span><span style="color:#ADD7FF"> https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/l/llvm.rb</span></span>
<span class="line"><span style="color:#91B4D5">License:</span><span style="color:#ADD7FF"> Apache-2.0</span><span style="color:#ADD7FF"> with</span><span style="color:#ADD7FF"> LLVM-exception</span></span>
<span class="line"><span style="color:#ADD7FF">==</span><span style="color:#A6ACCD">> </span><span style="color:#ADD7FF">Dependencies</span></span>
<span class="line"><span style="color:#91B4D5">Build:</span><span style="color:#ADD7FF"> cmake</span><span style="color:#ADD7FF"> ✘,</span><span style="color:#ADD7FF"> ninja</span><span style="color:#ADD7FF"> ✔,</span><span style="color:#ADD7FF"> swig</span><span style="color:#ADD7FF"> ✘</span></span>
<span class="line"><span style="color:#91B4D5">Required:</span><span style="color:#ADD7FF"> python@3.12</span><span style="color:#ADD7FF"> ✔,</span><span style="color:#ADD7FF"> xz</span><span style="color:#ADD7FF"> ✔,</span><span style="color:#ADD7FF"> z3</span><span style="color:#ADD7FF"> ✔,</span><span style="color:#ADD7FF"> zstd</span><span style="color:#ADD7FF"> ✔</span></span>
<span class="line"><span style="color:#ADD7FF">==</span><span style="color:#A6ACCD">> </span><span style="color:#ADD7FF">Options</span></span>
<span class="line"><span style="color:#91B4D5">--HEAD</span></span>
<span class="line"><span style="color:#91B4D5">        Install</span><span style="color:#ADD7FF"> HEAD</span><span style="color:#ADD7FF"> version</span></span>
<span class="line"><span style="color:#ADD7FF">==</span><span style="color:#A6ACCD">> </span><span style="color:#ADD7FF">Caveats</span></span>
<span class="line"><span style="color:#91B4D5">To</span><span style="color:#ADD7FF"> use</span><span style="color:#ADD7FF"> the</span><span style="color:#ADD7FF"> bundled</span><span style="color:#ADD7FF"> libc++</span><span style="color:#ADD7FF"> please</span><span style="color:#ADD7FF"> add</span><span style="color:#ADD7FF"> the</span><span style="color:#ADD7FF"> following</span><span style="color:#ADD7FF"> LDFLAGS:</span></span>
<span class="line"><span style="color:#E4F0FB">  LDFLAGS</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">-L/opt/homebrew/opt/llvm/lib/c++ -Wl,-rpath,/opt/homebrew/opt/llvm/lib/c++</span><span style="color:#A6ACCD">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">llvm</span><span style="color:#ADD7FF"> is</span><span style="color:#ADD7FF"> keg-only,</span><span style="color:#ADD7FF"> which</span><span style="color:#ADD7FF"> means</span><span style="color:#ADD7FF"> it</span><span style="color:#ADD7FF"> was</span><span style="color:#ADD7FF"> not</span><span style="color:#ADD7FF"> symlinked</span><span style="color:#ADD7FF"> into</span><span style="color:#ADD7FF"> /opt/homebrew,</span></span>
<span class="line"><span style="color:#91B4D5">because</span><span style="color:#ADD7FF"> macOS</span><span style="color:#ADD7FF"> already</span><span style="color:#ADD7FF"> provides</span><span style="color:#ADD7FF"> this</span><span style="color:#ADD7FF"> software</span><span style="color:#ADD7FF"> and</span><span style="color:#ADD7FF"> installing</span><span style="color:#ADD7FF"> another</span><span style="color:#ADD7FF"> version</span><span style="color:#ADD7FF"> in</span></span>
<span class="line"><span style="color:#91B4D5">parallel</span><span style="color:#ADD7FF"> can</span><span style="color:#ADD7FF"> cause</span><span style="color:#ADD7FF"> all</span><span style="color:#ADD7FF"> kinds</span><span style="color:#ADD7FF"> of</span><span style="color:#ADD7FF"> trouble.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">If</span><span style="color:#ADD7FF"> you</span><span style="color:#ADD7FF"> need</span><span style="color:#ADD7FF"> to</span><span style="color:#ADD7FF"> have</span><span style="color:#ADD7FF"> llvm</span><span style="color:#ADD7FF"> first</span><span style="color:#ADD7FF"> in</span><span style="color:#ADD7FF"> your</span><span style="color:#ADD7FF"> PATH,</span><span style="color:#ADD7FF"> run:</span></span>
<span class="line"><span style="color:#91B4D5">  echo</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">export PATH="/opt/homebrew/opt/llvm/bin:$PATH"</span><span style="color:#A6ACCD">'</span><span style="color:#91B4D5"> >></span><span style="color:#ADD7FF"> ~/.zshrc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">For</span><span style="color:#ADD7FF"> compilers</span><span style="color:#ADD7FF"> to</span><span style="color:#ADD7FF"> find</span><span style="color:#ADD7FF"> llvm</span><span style="color:#ADD7FF"> you</span><span style="color:#ADD7FF"> may</span><span style="color:#ADD7FF"> need</span><span style="color:#ADD7FF"> to</span><span style="color:#ADD7FF"> set:</span></span>
<span class="line"><span style="color:#5DE4C7">  export</span><span style="color:#E4F0FB"> LDFLAGS</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">-L/opt/homebrew/opt/llvm/lib</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#5DE4C7">  export</span><span style="color:#E4F0FB"> CPPFLAGS</span><span style="color:#91B4D5">=</span><span style="color:#A6ACCD">"</span><span style="color:#5DE4C7">-I/opt/homebrew/opt/llvm/include</span><span style="color:#A6ACCD">"</span></span>
<span class="line"><span style="color:#ADD7FF">==</span><span style="color:#A6ACCD">> </span><span style="color:#ADD7FF">Analytics</span></span>
<span class="line"><span style="color:#91B4D5">install:</span><span style="color:#ADD7FF"> 74,089</span><span style="color:#A6ACCD"> (30 </span><span style="color:#ADD7FF">days</span><span style="color:#A6ACCD">), 216,506 (</span><span style="color:#91B4D5">90</span><span style="color:#ADD7FF"> days</span><span style="color:#A6ACCD">), 602,102 (</span><span style="color:#91B4D5">365</span><span style="color:#ADD7FF"> days</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#91B4D5">install-on-request:</span><span style="color:#ADD7FF"> 34,994</span><span style="color:#A6ACCD"> (30 </span><span style="color:#ADD7FF">days</span><span style="color:#A6ACCD">), 109,493 (</span><span style="color:#91B4D5">90</span><span style="color:#ADD7FF"> days</span><span style="color:#A6ACCD">), 314,945 (</span><span style="color:#91B4D5">365</span><span style="color:#ADD7FF"> days</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#91B4D5">build-error:</span><span style="color:#5DE4C7"> 727</span><span style="color:#A6ACCD"> (30 </span><span style="color:#ADD7FF">days</span><span style="color:#A6ACCD">)</span></span>
<span class="line"></span></code></pre>
<h2 id="configuring-cmake"><a href="#configuring-cmake">Configuring CMake</a></h2>
<p>Make sure you have your CMake installed :)
Open up your terminal and run</p>
<pre><code>touch CMakeLists.txt
</code></pre>
<p>to create a CMakeLists.txt file
Now, by running the following code, CMake will be able to detect your llvm installation (on MacOS)</p>
<pre><code>echo 'export PATH="/opt/homebrew/opt/llvm/bin:$PATH"' >> ~/.zshrc \
&#x26;&#x26;  export LDFLAGS="-L/opt/homebrew/opt/llvm/lib" \
&#x26;&#x26;  export CPPFLAGS="-I/opt/homebrew/opt/llvm/include"
</code></pre>
<p>It's not the cleanest way to handle these things, but when you're hacking around, it should be good enough.</p>
<p>Now for your CMakeLists.txt</p>
<pre class="shiki poimandres" style="background-color:#1b1e28;color:#a6accd" tabindex="0"><code><span class="line"><span style="color:#A6ACCD">cmake_minimum_required(VERSION 3.22)</span></span>
<span class="line"><span style="color:#A6ACCD">project(llvm_playground) </span></span>
<span class="line"><span style="color:#A6ACCD">find_package(LLVM REQUIRED CONFIG)</span></span>
<span class="line"><span style="color:#A6ACCD">set(CMAKE_CXX_STANDARD 17)</span></span>
<span class="line"><span style="color:#A6ACCD">set(CMAKE_CXX_STANDARD_REQUIRED ON)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">include(AddLLVM)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD">SET(CMAKE_EXPORT_COMPILE_COMMANDS ON)</span></span>
<span class="line"></span></code></pre>
<p>Now run</p>
<pre class="shiki poimandres" style="background-color:#1b1e28;color:#a6accd" tabindex="0"><code><span class="line"><span style="color:#91B4D5">cmake</span><span style="color:#ADD7FF"> -S</span><span style="color:#ADD7FF"> .</span><span style="color:#ADD7FF"> -B</span><span style="color:#ADD7FF"> build</span><span style="color:#A6ACCD"> &#x26;&#x26; </span><span style="color:#91B4D5">cmake</span><span style="color:#ADD7FF"> --build</span><span style="color:#ADD7FF"> build</span></span>
<span class="line"></span></code></pre>
<p>to use cmake to build using the CMakelists.txt script we have create in the current folder and build all the artifacts in the <code>build</code> folder</p>
<p>before adding these two lines that will help us build our <code>main.cpp</code></p>
<pre><code>add_llvm_executable(main main.cpp)
target_include_directories(main ${LLVM_INCLUDE_DIRS})
</code></pre>
<p>and for your main.cpp, we'll try to use llvm to create a function <code>main()</code> that returns an int of 0 to generate LLVM IR and then use LLVM's llc to compile it into an object file and use clang to compile that object file to an executable :)</p>
<p>It will be fun :)</p>
<p>First create your <code>main.cpp</code>,</p>
<p>we'll first include our necessary header</p>
<pre class="shiki poimandres" style="background-color:#1b1e28;color:#a6accd" tabindex="0"><code><span class="line"></span></code></pre></div></article></div><button class="bottom-4 right-4 fixed"><div class="inline text-2xl font-bold border-black border-2 rounded  p-0 m-0 h-100 w-100">⇡⇡</div></button><footer class="footer self-center justify-center gap-2 pt-4 items-center italic "><p>Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)</p></footer><script src="/_next/static/chunks/webpack-35bfe93271ca66a5.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/7385e8d9d3c5518f-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n2:HL[\"/_next/static/css/8d2a8dc44e2b7a2e.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:I[3728,[],\"\"]\n6:I[9928,[],\"\"]\n7:I[6954,[],\"\"]\n8:I[7264,[],\"\"]\nb:I[8187,[\"986\",\"static/chunks/986-77351ce039fbbc1a.js\",\"185\",\"static/chunks/app/layout-87d2b172080349b5.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/8d2a8dc44e2b7a2e.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"hwQUiY9TH7Ld7WaQ6wcqo\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/llvm_playground_1\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"llvm_playground_1\",\"d\"],{\"children\":[\"__PAGE__?{\\\"id\\\":\\\"llvm_playground_1\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L5\"],\"globalErrorComponent\":\"$6\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"px-4 py-4\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_d4e0c8 flex flex-col min-h-screen\",\"children\":[[\"$\",\"a\",null,{\"href\":\"/\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex justify-center items-center py-4 \",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold\",\"children\":\"Jasmine Tang\"}]}]}],[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",[\"id\",\"llvm_playground_1\",\"d\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$L9\",\"$La\",null],\"segment\":\"__PAGE__?{\\\"id\\\":\\\"llvm_playground_1\\\"}\"},\"styles\":[]}],\"segment\":[\"id\",\"llvm_playground_1\",\"d\"]},\"styles\":[]}],\"segment\":\"posts\"},\"styles\":[]}]}],[\"$\",\"$Lb\",null,{}],[\"$\",\"footer\",null,{\"className\":\"footer self-center justify-center gap-2 pt-4 items-center italic \",\"children\":[\"$\",\"p\",null,{\"children\":\"Built by Jasmine with NextJS, TailwindCSS, and a tonnn of loveee :)\"}]}]]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"c:T3590,"])</script><script>self.__next_f.push([1,"\u003cnav class=\"toc\"\u003e\u003col class=\"toc-level toc-level-1\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#installing-llvm\"\u003eInstalling llvm\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#configuring-cmake\"\u003eConfiguring CMake\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/nav\u003e\u003cp\u003eHi everyone, it's Jasmine here, or \u003ccode\u003ebadumbatish\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eInspired by mcyoung's llvm ir blog and sha4dy's learning llvm blog, I think it'd be great to write some kind of similar blog posts, albeit I'm still learning :)\u003c/p\u003e\n\u003cp\u003eIn this blog post, let's try to get a minimal running example of LLVM running/\u003c/p\u003e\n\u003cp\u003eWe'll get started by installing LLVM, write a CMakeLists.txt to build our code, and create a main.cpp to generate\na \u003ccode\u003emain\u003c/code\u003e function that returns 0\u003c/p\u003e\n\u003ch2 id=\"installing-llvm\"\u003e\u003ca href=\"#installing-llvm\"\u003eInstalling llvm\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eLLVM is a very well-known compiler framework so chances are you wouldn't have to build it from source and just install it from your favorite package manager.\u003c/p\u003e\n\u003cp\u003eOn my MacOS, I'll use homebrew to install llvm\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color:#1b1e28;color:#a6accd\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003ebrew\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e install\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e llvm\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOn MacOS, for some reason CMake fails to recognize and find LLVm via \u003ccode\u003efind_package()\u003c/code\u003e so\nyou would have to configure it with some extra steps\u003c/p\u003e\n\u003cp\u003eThen when you run\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color:#1b1e28;color:#a6accd\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003ebrew\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e info\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e llvm\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt'll spit out some extra information about linking flags for you\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color:#1b1e28;color:#a6accd\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003e➜\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e  badumbatish.github.io\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e git:\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003emain\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e✗\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e brew\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e info\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e llvm\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#ADD7FF\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003ellvm:\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e stable\u003c/span\u003e\u003cspan style=\"color:#5DE4C7\"\u003e 18.1.8\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e (bottled), HEAD [keg-only]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eNext-gen\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e compiler\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e infrastructure\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003ehttps://llvm.org/\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eInstalled\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003e/opt/homebrew/Cellar/llvm/18.1.8\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e (7,722 \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003efiles,\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e 1.8GB\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003e  Poured\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e bottle\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e using\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e the\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e formulae.brew.sh\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e API\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e on\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e 2024-07-01\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e at\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e 16:36:01\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eFrom:\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/l/llvm.rb\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eLicense:\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e Apache-2.0\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e with\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e LLVM-exception\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#ADD7FF\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003eDependencies\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eBuild:\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e cmake\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e ✘,\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e ninja\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e ✔,\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e swig\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e ✘\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eRequired:\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e python@3.12\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e ✔,\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e xz\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e ✔,\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e z3\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e ✔,\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e zstd\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e ✔\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#ADD7FF\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003eOptions\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003e--HEAD\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003e        Install\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e HEAD\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e version\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#ADD7FF\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003eCaveats\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eTo\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e use\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e the\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e bundled\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e libc++\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e please\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e add\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e the\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e following\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e LDFLAGS:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#E4F0FB\"\u003e  LDFLAGS\u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#5DE4C7\"\u003e-L/opt/homebrew/opt/llvm/lib/c++ -Wl,-rpath,/opt/homebrew/opt/llvm/lib/c++\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003ellvm\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e is\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e keg-only,\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e which\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e means\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e it\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e was\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e not\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e symlinked\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e into\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e /opt/homebrew,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003ebecause\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e macOS\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e already\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e provides\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e this\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e software\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e and\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e installing\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e another\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e version\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e in\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eparallel\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e can\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e cause\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e all\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e kinds\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e of\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e trouble.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eIf\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e you\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e need\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e to\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e have\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e llvm\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e first\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e in\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e your\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e PATH,\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e run:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003e  echo\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e '\u003c/span\u003e\u003cspan style=\"color:#5DE4C7\"\u003eexport PATH=\"/opt/homebrew/opt/llvm/bin:$PATH\"\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003e \u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e ~/.zshrc\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003eFor\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e compilers\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e to\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e find\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e llvm\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e you\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e may\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e need\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e to\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e set:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#5DE4C7\"\u003e  export\u003c/span\u003e\u003cspan style=\"color:#E4F0FB\"\u003e LDFLAGS\u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#5DE4C7\"\u003e-L/opt/homebrew/opt/llvm/lib\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#5DE4C7\"\u003e  export\u003c/span\u003e\u003cspan style=\"color:#E4F0FB\"\u003e CPPFLAGS\u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#5DE4C7\"\u003e-I/opt/homebrew/opt/llvm/include\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#ADD7FF\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e\u003e \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003eAnalytics\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003einstall:\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e 74,089\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e (30 \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003edays\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e), 216,506 (\u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003e90\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e days\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e), 602,102 (\u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003e365\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e days\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003einstall-on-request:\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e 34,994\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e (30 \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003edays\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e), 109,493 (\u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003e90\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e days\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e), 314,945 (\u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003e365\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e days\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003ebuild-error:\u003c/span\u003e\u003cspan style=\"color:#5DE4C7\"\u003e 727\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e (30 \u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003edays\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"configuring-cmake\"\u003e\u003ca href=\"#configuring-cmake\"\u003eConfiguring CMake\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eMake sure you have your CMake installed :)\nOpen up your terminal and run\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003etouch CMakeLists.txt\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eto create a CMakeLists.txt file\nNow, by running the following code, CMake will be able to detect your llvm installation (on MacOS)\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eecho 'export PATH=\"/opt/homebrew/opt/llvm/bin:$PATH\"' \u003e\u003e ~/.zshrc \\\n\u0026#x26;\u0026#x26;  export LDFLAGS=\"-L/opt/homebrew/opt/llvm/lib\" \\\n\u0026#x26;\u0026#x26;  export CPPFLAGS=\"-I/opt/homebrew/opt/llvm/include\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt's not the cleanest way to handle these things, but when you're hacking around, it should be good enough.\u003c/p\u003e\n\u003cp\u003eNow for your CMakeLists.txt\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color:#1b1e28;color:#a6accd\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#A6ACCD\"\u003ecmake_minimum_required(VERSION 3.22)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#A6ACCD\"\u003eproject(llvm_playground) \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#A6ACCD\"\u003efind_package(LLVM REQUIRED CONFIG)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#A6ACCD\"\u003eset(CMAKE_CXX_STANDARD 17)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#A6ACCD\"\u003eset(CMAKE_CXX_STANDARD_REQUIRED ON)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#A6ACCD\"\u003einclude(AddLLVM)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#A6ACCD\"\u003eSET(CMAKE_EXPORT_COMPILE_COMMANDS ON)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow run\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color:#1b1e28;color:#a6accd\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#91B4D5\"\u003ecmake\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e -S\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e .\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e -B\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e build\u003c/span\u003e\u003cspan style=\"color:#A6ACCD\"\u003e \u0026#x26;\u0026#x26; \u003c/span\u003e\u003cspan style=\"color:#91B4D5\"\u003ecmake\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e --build\u003c/span\u003e\u003cspan style=\"color:#ADD7FF\"\u003e build\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eto use cmake to build using the CMakelists.txt script we have create in the current folder and build all the artifacts in the \u003ccode\u003ebuild\u003c/code\u003e folder\u003c/p\u003e\n\u003cp\u003ebefore adding these two lines that will help us build our \u003ccode\u003emain.cpp\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eadd_llvm_executable(main main.cpp)\ntarget_include_directories(main ${LLVM_INCLUDE_DIRS})\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand for your main.cpp, we'll try to use llvm to create a function \u003ccode\u003emain()\u003c/code\u003e that returns an int of 0 to generate LLVM IR and then use LLVM's llc to compile it into an object file and use clang to compile that object file to an executable :)\u003c/p\u003e\n\u003cp\u003eIt will be fun :)\u003c/p\u003e\n\u003cp\u003eFirst create your \u003ccode\u003emain.cpp\u003c/code\u003e,\u003c/p\u003e\n\u003cp\u003ewe'll first include our necessary header\u003c/p\u003e\n\u003cpre class=\"shiki poimandres\" style=\"background-color:#1b1e28;color:#a6accd\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e"])</script><script>self.__next_f.push([1,"a:[\"$\",\"article\",null,{\"className\":\"p-8 prose  max-w-none w-full lg:w-1/2 md:w-4/6 sm:w-5/6 prose-sky mx-auto\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex justify-center text-2xl font-bold \",\"children\":[\"$\",\"h2\",null,{\"children\":\"Jasmine's llvm playground - 1\"}]}],[\"$\",\"div\",null,{\"className\":\"flex justify-start text-xl font-bold underline\",\"children\":[\"$\",\"h4\",null,{\"children\":\"2024-07-13\"}]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$c\"}}]]}]\n5:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"t"])</script><script>self.__next_f.push([1,"itle\",\"1\",{\"children\":\"Jasmine's llvm playground - 1\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Built with NextJS, TailwindCSS, and a tonnn of loveee :)\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/_next/static/media/pfp3.5cd65164.png\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n9:null\n"])</script></body></html>